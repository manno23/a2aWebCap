name: Test custom agents

on:
  workflow_dispatch: {}

jobs:
  test-agents:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install Copilot CLI
        run: |
          gh extension install github/gh-copilot
        env:
          GH_TOKEN: ${{ github.token }}

      - name: Debug gh copilot commands
        run: |
          gh --version
          gh extension list
          gh copilot --help || true
        env:
          GH_TOKEN: ${{ github.token }}

      # Once we know the real subcommand for agents, we will replace these.
      - name: Run a2a-protocol-change-sentinel (dry test)
        run: |
          echo "TODO: replace with gh copilot <subcommand> run a2a-protocol-change-sentinel"
        env:
          GH_TOKEN: ${{ github.token }}

      - name: Run agent-integration-scout (dry test)
        run: |
          echo "TODO: replace with gh copilot <subcommand> run agent-integration-scout"
        env:
          GH_TOKEN: ${{ github.token }}
