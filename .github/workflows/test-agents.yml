name: Test custom agents

on:
  workflow_dispatch: {}

jobs:
  test-agents:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install Copilot CLI
        run: |
          gh extension install github/gh-copilot
        env:
          GH_TOKEN: ${{ secrets.MY_GH_PAT || secrets.GH_TOKEN || secrets.GITHUB_TOKEN }}

      - name: Show gh copilot help (debug)
        run: |
          gh --version
          gh extension list
          gh copilot --help || true
        env:
          GH_TOKEN: ${{ secrets.MY_GH_PAT || secrets.GH_TOKEN || secrets.GITHUB_TOKEN }}

      # Placeholder: enable once 'agents' or similar is supported.
      - name: NOTE
        run: |
          echo "Custom agents are defined in .github/agents/*.agent.md"
          echo "But the current gh copilot CLI does not support 'agents' yet."
          echo "Once the CLI adds that subcommand, replace this step with:"
          echo "  gh copilot agents run a2a-protocol-change-sentinel --verbose"
