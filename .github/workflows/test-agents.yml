name: Test custom agents

on:
  workflow_dispatch: {}

jobs:
  test-agents:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install Copilot CLI
        run: |
          gh extension install github/gh-copilot
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Debug gh copilot commands
        run: |
          gh --version
          gh extension list
          gh copilot --help || true
        env:
          GITHUB_TOKEN: ${{ secrets.MY_GITHUB_API_KEY }}

      # TODO: once you see the correct subcommand in the help output,
      # replace the command below accordingly.
      - name: Run a2a-protocol-change-sentinel (dry test)
        run: |
          echo "Replace this with the real 'gh copilot <subcommand>' for agents once known"
        env:
          GITHUB_TOKEN: ${{ secrets.MY_GITHUB_API_KEY }}

      - name: Run agent-integration-scout (dry test)
        run: |
          echo "Replace this with the real 'gh copilot <subcommand>' for agents once known"
        env:
          GITHUB_TOKEN: ${{ secrets.MY_GITHUB_API_KEY }}
